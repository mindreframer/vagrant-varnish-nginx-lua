#user  nobody;
worker_processes  1;
# we're using runit, don't daemonize!
# http://wiki.nginx.org/CoreModule#daemon
daemon off;

error_log logs/error.log debug;

events {
  worker_connections 1024;
}

http {
  server {
    # just for development!
    lua_code_cache off;

    listen 9999;
    location = /test {
      access_by_lua "require('accelerator').access({ host='127.0.0.1', port=11211 })";
    }

    location = /template{
      content_by_lua_file '/vagrant/lua/nginx/template.lua';
    }

    location /memcached {
      set $memc_cmd $arg_cmd;
      set $memc_key $arg_key;
      memc_pass 127.0.0.1:11211;
    }
  }
}